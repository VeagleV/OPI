#include<iostream>
#include<cmath>
#include <time.h>
#include <fstream>

using namespace std;

int main(){
    
    int n = 0, x = 0;
    int factorial = 0;
    double numbFact = 1;
    double answer = 0;
    struct timespec start, end;

    cout << "Enter x (in radians) for calculating its sin:";
    cin >> x;
    cout << endl;
    cout << "Enter a number of first members for calculating sin x:";
    cin >> n;
    cout << endl;

    clock_gettime(CLOCK_MONOTONIC_RAW, &start);
    for (int i = 1; i <= n; i++){
        factorial = 2*i - 1;  
        for (int j = 1; j <= factorial; j++){
            numbFact *= j;
        }
        answer += (pow(-1, i-1) * pow(x, 2*i - 1)) / numbFact;
        numbFact = 1;
    }
    cout << "Sin x = " << answer << endl;
    clock_gettime(CLOCK_MONOTONIC_RAW, &end);
    printf("Time taken: %lf sec.\n", end.tv_sec-start.tv_sec + 0.000000001*(end.tv_nsec-start.tv_nsec));

    ofstream fout;
    fout.open("Data.txt", ios::app);
    if (fout.is_open()){
        fout << "Number of calculatings: " << n << ", " << "Time: " << end.tv_sec-start.tv_sec + 0.000000001*(end.tv_nsec-start.tv_nsec) << '\n';
    }
    fout.close();
}
